<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê¸€ ê²Œì‹œíŒ</title>
  <link rel="stylesheet" href="css/articlestyle.css">
</head>
<body>
  <!-- í—¤ë” -->
  <header>
    <h1>ë¸”ë£¨ ë ˆì½”ë“œ</h1>

    <div class="header-content">
      <!-- ì™¼ìª½: SNS ë§í¬ -->
      <div class="social-links">
        <a href="https://twitter.com" target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://tiktok.com" target="_blank"><i class="fab fa-tiktok"></i></a>
        <a href="https://youtube.com" target="_blank"><i class="fab fa-youtube"></i></a>
        <a href="https://tistory.com" target="_blank"><i class="fas fa-blog"></i></a>
      </div>

      <!-- ì˜¤ë¥¸ìª½: í”„ë¡œí•„ ì´ë¯¸ì§€ -->
      <div class="profile">
        <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fb2yJT5%2Fbtr1XxichTb%2FghHxI9JpXKxsHWPKt0kJ91%2Fimg.png" alt="ë‚´ í”„ë¡œí•„">
      </div>
    </div>
  </header>

  <!-- ê²€ìƒ‰ì°½ (ì™¼ìª½ ìƒë‹¨) -->
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="ìºë¦­í„° ê²€ìƒ‰...">
    <button type="button" id="searchBtn">ê²€ìƒ‰</button>
  </div>

  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav>
    <ul>
      <li><a href="index.html">ìºë¦­í„° ë¦¬ìŠ¤íŠ¸</a></li>
      <li><a href="universe.html">ê¸°íƒ€ì„¤ì •</a></li>
      <li><a href="art.html">ê·¸ë¦¼</a></li>
      <li><a href="writing.html">ê¸€</a></li>
      <li><a href="comic.html">ë§Œí™”</a></li>
      <li><a href="music.html">ë…¸ë˜</a></li>
      <li><a href="game.html">ê²Œì„</a></li>
    </ul>
  </nav>

  <!-- ê²Œì‹œíŒ ì˜ì—­ -->
  <div class="post-container" id="postContainer"></div>
  <div class="pagination" id="pagination"></div>

  <script>
  let posts = [];
  const postsPerPage = 20;
  let currentPage = 1;

  async function loadPosts() {
    const res = await fetch("uposts.json");
    posts = await res.json();
    renderPosts();
  }

function renderPosts() {
  const container = document.getElementById("postContainer");
  container.innerHTML = "";

  const start = (currentPage - 1) * postsPerPage;
  const end = start + postsPerPage;
  const currentPosts = posts.slice(start, end);

  currentPosts.forEach(post => {
    const postItem = document.createElement("div");
    postItem.className = "post-item";
    postItem.innerHTML = `
      <div class="post-title">${post.title}</div>
      <div class="post-date">${post.date}</div>
    `;

    const postContent = document.createElement("div");
    postContent.className = "post-content";

    // ğŸ“ ê¸€ ë‚´ìš© ì¶œë ¥ â€” \n ì¤„ë°”ê¿ˆ ë°˜ì˜
    let contentHTML = `<p style="white-space: pre-wrap;">${post.content}</p>`;

    // ğŸ–¼ï¸ ì´ë¯¸ì§€ê°€ ìˆì„ ê²½ìš°
    if (post.image) {
      contentHTML += `
        <img src="${post.image}" alt="ì´ë¯¸ì§€" 
             style="max-width:100%; margin-top:10px; border-radius:8px;">
      `;
    }

    // ğŸ”Š ì˜¤ë””ì˜¤ê°€ ìˆì„ ê²½ìš°
    if (post.audio) {
      contentHTML += `
        <audio controls style="margin-top:10px; width:100%;">
          <source src="${post.audio}" type="audio/mpeg">
          ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        </audio>
      `;
    }

    postContent.innerHTML = contentHTML;

    postItem.addEventListener("click", () => {
      const isOpen = postContent.style.display === "block";
      document.querySelectorAll(".post-content").forEach(c => c.style.display = "none");
      if (!isOpen) postContent.style.display = "block";
    });

    container.appendChild(postItem);
    container.appendChild(postContent);
  });
    renderPagination();
  }

  function renderPagination() {
    const pagination = document.getElementById("pagination");
    pagination.innerHTML = "";
    const totalPages = Math.ceil(posts.length / postsPerPage);
    for (let i = 1; i <= totalPages; i++) {
      const btn = document.createElement("button");
      btn.innerText = i;
      if (i === currentPage) btn.classList.add("active");
      btn.addEventListener("click", () => {
        currentPage = i;
        renderPosts();
      });
      pagination.appendChild(btn);
    }
  }

  loadPosts();
</script>

</body>
</html>
